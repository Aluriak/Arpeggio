<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="Igor DejanoviÄ‡">
        
        <link rel="shortcut icon" href="../img/favicon.ico">

	<title>Handling errors - Arpeggio</title>

        <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../css/highlight.css">
        <link href="../extra.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="..">Arpeggio</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="..">Home</a>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">User Guide <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../getting_started/">Getting started</a>
</li>

                        
                            
<li >
    <a href="../grammars/">Grammars</a>
</li>

                        
                            
<li >
    <a href="../parse_trees/">Parse tree</a>
</li>

                        
                            
<li class="active">
    <a href="./">Handling errors</a>
</li>

                        
                            
<li >
    <a href="../debugging/">Debugging</a>
</li>

                        
                            
<li >
    <a href="../configuration/">Parser configuration</a>
</li>

                        
                            
<li >
    <a href="../semantics/">Semantic analysis</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Tutorials <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../tutorials/csv/">CSV</a>
</li>

                        
                            
<li >
    <a href="../tutorials/bibtex/">BibTex</a>
</li>

                        
                            
<li >
    <a href="../tutorials/calc/">Calc</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">About <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../about/discuss/">Discuss</a>
</li>

                        
                            
<li >
    <a href="../about/contributing/">Contributing</a>
</li>

                        
                            
<li >
    <a href="../about/license/">License</a>
</li>

                        
                        </ul>
                    </li>
                
                
                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                
                    <li >
                        <a rel="next" href="../parse_trees/">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../debugging/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                
                
                    <li>
                        <a href="https://github.com/igordejanovic/Arpeggio">
                            
                                <i class="fa fa-github"></i>
                            
                            GitHub
                        </a>
                    </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#handling-syntax-errors-in-the-input">Handling syntax errors in the input</a></li>
        
    
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="handling-syntax-errors-in-the-input">Handling syntax errors in the input</h1>
<p>This section explains how to handle parsing errors.</p>
<hr />
<p>If your grammar is correct but you get input string with syntax error parser
will raise <code>NoMatch</code> exception with the information where in the input stream
error has occurred and what the parser expect to see at that location.</p>
<p>By default, if <code>NoMatch</code> is not caught you will get detailed explanation of
the error on the console.  The exact location will be reported, the context
(part of the input where the error occurred) and the first rule that was tried
at that location.</p>
<p>Example:</p>
<pre><code class="python">parser = ParserPython(calc)
# 'r' in the following expression can't be recognized by
# calc grammar
input_expr = &quot;23+4/r-89&quot;
parse_tree = parser.parse(input_expr)
</code></pre>

<p>As there is an error in the <code>input_expr</code> string (<code>r</code> is not expected) the 
following traceback will be printed:</p>
<pre><code>Traceback (most recent call last):
  ...
arpeggio.NoMatch: Expected '+' at position (1, 6) =&gt; '23+4/*r-89'.
</code></pre>
<p>The place in the input stream is marked by <code>*</code> and the position in (row, col) is
given (<code>(1, 6)</code>).</p>
<p>If you wish to handle syntax errors gracefully you can catch <code>NoMatch</code> in your
code and inspect its attributes.</p>
<pre><code class="python">try:
  parser = ParserPython(calc)
  input_expr = &quot;23+4/r-89&quot;
  parse_tree = parser.parse(input_expr)
except NoMatch as e:
  # Do something with e
</code></pre>

<p><code>NoMatch</code> class has the following attributes:</p>
<ul>
<li><code>rule</code> - A <code>ParsingExpression</code> rule that is the source of the exception.</li>
<li><code>position</code> - A position in the input stream where exception occurred.</li>
<li><code>parser</code> - A <code>Parser</code> instance used for parsing.</li>
<li><code>exp_str</code> -  What is expected? If not given it is deduced from the rule. Currently
  this is used by <a href="https://github.com/igordejanovic/textX">textX</a> for nicer
  error reporting.</li>
</ul>
<p>The <code>position</code> is given as the offset from the beginning of the input string.
To convert it to row and column use <code>pos_to_linecol</code> method of the parser.</p>
<pre><code class="python">try:
  parser = ParserPython(calc)
  input_expr = &quot;23+4/r-89&quot;
  parse_tree = parser.parse(input_expr)
except NoMatch as e:
  line, col = e.parser.pos_to_linecol(e.position)
  ...
</code></pre>

<p>Arpeggio is a backtracking parser, which means that it will go back and try
another alternatives when the match does not succeeds but it will nevertheless
report the furthest place in the input where it failed.  Currently Arpeggio will
report the first rule it tried at that location. Future versions could keep the
list of all rules that was tried at reported location.</p></div>
            
        </div>

        <footer class="col-md-12">
            <hr>
            
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>

        <script src="../js/jquery-1.10.2.min.js"></script>
        <script src="../js/bootstrap-3.0.3.min.js"></script>
        <script src="../js/highlight.pack.js"></script>
        <script>var base_url = '..';</script>
        <script data-main="../mkdocs/js/search.js" src="../mkdocs/js/require.js"></script>
        <script src="../js/base.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                    </div>
                    <div class="modal-body">
                        <p>
                            From here you can search these documents. Enter
                            your search terms below.
                        </p>
                        <form role="form">
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                            </div>
                        </form>
                        <div id="mkdocs-search-results"></div>
                    </div>
                    <div class="modal-footer">
                    </div>
                </div>
            </div>
        </div>

    </body>
</html>
